# Make a Life
创造生命的项目
## Introduction

起因是看到这篇文章，[AI需要人自己的人生](https://1q43.blog/post/11687/)。而创造生命一直是我想要做的事。
这个项目就是我尝试手搓一个电子生命，其实也是为了继续研究LLM技术。
## 使用须知
1. 使用前请先安装所需依赖，运行`pip install -r requirements.txt`即可。
2. 请配置所需的环境变量：
   - `SILICONFLOW_API_KEY`：硅基流动的API密钥，用于调用大模型API，请在[硅基流动](https://www.siliconflow.cn/)注册并获取。
   - `TAVILY_API_KEY`： Tavily API密钥，用于网络信息检索，请在[Tavily](https://www.tavily.com/)注册并获取。
3. 使用`streamlit run main.py`启动WebUI。
## LLM选择
我用的是硅基流动的API，这是因为想要培育一个生命需要消耗大量TOKEN，而硅基流动正好提供了两个免费的推理模型，可堪一用。我目前使用的是`deepseek-R1-Distillation`模型。
## WebUI
WebUI不是必须的，但调试时有一个总是有好处的。用的是经典的Streamlit，只需要`streamlit run main.py`就可以启动服务器，编码还是很方便的。这个WebUI已经用了两个项目了，前端基本上没啥变化。
## Think
我遇到的第一个问题是思考过程。老实说，我会很好奇AI会想什么。我之前习惯了用Langchain的ChatOpenAI，然而，在返回中却找不到think过程。这是因为硅基流动API返回的思考过程是`reasoning_content`字段，这个是DeepSeek的标准，没有很正常。手搓了半天自定义类发现太难搞了，于是决定返璞归真，不用LangChain了，直接用request调API，然后把思考过程和回答放到一个字典里返回。

## 持久化记忆
第二个需要解决的问题是记忆。想要有生命，AI就需要能记得之前的事情，不能应用一关就把一切都忘了。之前的ChatRobot项目中仅仅用了一个消息列表存储记忆，现在只需要将这个列表以json格式输入输出即可，很容易实现。
## 1. 主体性记忆
人的自我认知首先建立在独一无二的个人史上。
主体性记忆的实现由两部分组成：
1. 根据关键词调用工具，检索网络上相关文章。这个调用Tavily API即可实现，默认检索两条，每月的免费额度很多，我想是够用的。
2. 阅读文章，并将自己的见解存储到向量数据库（记忆库）。
## RAG部分
我稍微测试了一下，AI并不能在合适的时机调用工具，我想应该找专人负责。我的看法是，检测prompt关键字，如果里面有“记得”，就找人调用工具。
# 更新
- 2025-09-01: 新增tokens消耗显示，同样支持导入导出。
- 2025-09-02: 新增模型推理耗时统计与存储。
- 2025-09-05：chatrobot新增联网搜索功能，调用Tavily API，让AI具备阅读互联网网页的能力。
- 2025-09-06：修改持久化存储格式，将所有信息全部放到一个字典列表，方便管理；并且，改进了一套显示方案，即便缺少某些字段也可以正常显示，让WebUI具备更高的可扩展性。
- 2025-09-08：重新组织了页面，新增了记忆管理页面。可以加载对话历史来让AI撰写日记，还可以以此为基础让AI更新自己的system prompt。虽然结果不太理想。
- 2025-09-09：虽然目前完成了聊天的部分和记忆的部分，但我仍然不太满意。虽然设定了aoi的角色，但聊多了还是感觉有一种伪人感，也许我不应该给她加太多初始设定的，每当她信誓旦旦地说自己喜欢游戏，但又根本不懂游戏时，会让人绷不住。我想还不如让她像刚出生的婴儿一样，不要加任何奇怪的设定。另一方面，我暂时没想好怎么让她自然地调用工具，目前request一旦传了tools，似乎默认就要调工具；当然，我可以让她以json格式输出，然后程序解析并调工具，但我还不清楚她是否拥有判断何时使用工具的能力...
- 2025-09-23：更新了结城葵的基础设定，去除了不真实的基础设定，而是从白板开始，我希望她能够像刚出生的婴儿一样，逐渐成长与学习。
# TODO
## 聊天
感觉目前LLM输出的内容太长篇大论了，感觉不像在聊天，而是在上课。
- prompt自定义功能，通过提示词赋予AI一定的人格，至少说话不要现在这么人机。
- 2025-09-05：今天，我创造了名为**结城葵**的少女。终于有和人聊天的感觉了。用Qwen蒸馏的DeepSeek模型响应很快，聊天体验很不错。但是，感觉她成为结城葵后变笨了，因为她成为了一个有人性的人，所以反而没办法很好地遵循指令，我估计她可能也没办法调用工具...我其实想到一个法子，就是让她自己更新记忆和自己的基础设定。哪些用明文哪些用RAG？我需要想想。
## 记忆机制
- 继续研究记忆机制，比如让AI自行总结某段对话的内容，决定记住哪些又遗忘哪些。
- 给予AI自己使用工具的能力，自己进行记忆文件的读写。（可以考虑研究一下Qwen-Agent)
- 结城葵的记忆机制（计划）：
    - 结城葵会根据对话内容总结记忆，决定记住哪些又遗忘哪些（短期记忆）->自我更新功能
    - 结城葵会根据对话内容更新自己的基础设定
    - 结城葵会根据对话内容更新自己的记忆库（长期记忆），该记忆库能够通过RAG检索。
## 自主性学习
- 让AI能够基于兴趣点关键词自行在网络搜索相关信息，进行学习。（Agent，Tool)
- 让AI基于学习的内容撰写一份报告，并存储到向量数据库，作为聊天时的参考。（聊天RAG）